<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <!-- FontAwesome -->
    <link rel="stylesheet" href="resource/fontawesome/all.min.css" >
    <script src="all.min.js"></script>

    <title>Home
    </title>
</head>
<body class="bg-secondary">
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <a class="navbar-brand" href="#">Avtar Assignment</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
      
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
              <a class="nav-link" href="#"> <span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#"></a>
            </li>
            
            
          </ul>
          <form class="form-inline my-2 my-lg-0">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item mx-1">
                  <a id="userlink" class="nav-link" href="">Username</a>
                </li>
                <li class="nav-item mx-1">
                    <a id="signoutlink" class="nav-link" href="">Signout</a>
                  </li>
              </ul>
          </form>
        </div>
    </nav>
    <h1 class="text-center text-light">Welcome To Avtar Internship</h1>
        <h1 class="text-center text-light"></h1>
         <h3 class="text-center text-black-50">Assignment-2</h3>
         <h3 id="hh" class="text-center"></h3>
         <img src="home.png" class="img-fluid" alt="Responsive image">
   
    <script>
          //...........................References...........................//
          let userlink = document.getElementById('userlink');
          let signoutlink=document.getElementById('signoutlink');
          let header=document.getElementById('hh');
          var currentUser=null;
          //..........................Functions..............................//
               function getUsername(){
                   let keepLoggedIn=localStorage.getItem("keepLoggedIn");

                   if(keepLoggedIn == "yes"){
                       currentUser=JSON.parse(localStorage.getItem('user'));
                   }else{
                       currentUser=JSON.parse(sessionStorage.getItem('user'));
                   }
               }
               function Signout(){
                   sessionStorage.removeItem('user');
                   localStorage.removeItem('user');
                   localStorage.removeItem('keepLoggedIn');
                   window.location="home.html";
               }
          //......................Windows Loads......................//
              window.onload=function(){
                  getUsername();
                  if(currentUser==null){
                      userlink.innerText="Create New Account";
                      userlink.classList.replace("nav-link","btn");
                      userlink.classList.add("btn-primary");
                      userlink.href="register.html";

                      signoutlink.innerText="Login";
                      signoutlink.classList.replace("nav-link","btn");
                      signoutlink.classList.add("btn-success");
                      signoutlink.href="login.html";
                  }else{
                      userlink.innerText=currentUser.username;
                      header.innerText="Welcome "+ currentUser.fullname; 
                      userlink.classList.replace("btn","nav-link");
                      userlink.classList.remove("btn-primary");
                      userlink.href="#";

                      signoutlink.innerText="Sign Out";
                      signoutlink.classList.replace("btn","nav-link");
                      signoutlink.classList.remove("btn-success");
                      signoutlink.href="javascript:Signout()";
                  }
              }     
      </script>
</body>
</html>
